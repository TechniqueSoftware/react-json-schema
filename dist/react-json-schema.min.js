"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(n,t,r){if(t)e(n.prototype,t);if(r)e(n,r);return n}}();var _react=require("react");function _objectWithoutProperties(e,n){var t={};for(var r in e){if(n.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;t[r]=e[r]}return t}function _classCallCheck(e,n){if(!(e instanceof n)){throw new TypeError("Cannot call a class as a function")}}var _componentMap=new WeakMap;var ReactJsonSchema=function(){function e(){_classCallCheck(this,e)}_createClass(e,[{key:"parseSchema",value:function e(n){var t=null;var r=null;if(Array.isArray(n)){r=this.parseSubSchemas(n)}else{t=this.createComponent(n)}return t||r}},{key:"parseSubSchemas",value:function e(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var t=[];var r=0;var o=true;var a=false;var c=undefined;try{for(var i=n[Symbol.iterator](),u;!(o=(u=i.next()).done);o=true){var l=u.value;l.key=typeof l.key!=="undefined"?l.key:r;t.push(this.parseSchema(l));r++}}catch(e){a=true;c=e}finally{try{if(!o&&i.return){i.return()}}finally{if(a){throw c}}}return t}},{key:"createComponent",value:function e(n){var t=n.component,r=n.children,o=n.text,a=_objectWithoutProperties(n,["component","children","text"]);var c=this.resolveComponent(n);if(r===undefined&&o===undefined){return(0,_react.createElement)(c,a)}var i=typeof o!=="undefined"?o:this.resolveComponentChildren(n);return(0,_react.createElement)(c,a,i)}},{key:"resolveComponent",value:function e(n){var t=this.getComponentMap();var r=null;if(n.hasOwnProperty("component")){if(n.component===Object(n.component)){r=n.component}else if(t&&t[n.component]){r=t[n.component]}else if(_react.DOM.hasOwnProperty(n.component)){r=n.component}}else{throw new Error("ReactJsonSchema could not resolve a component due to a missing component attribute in the schema.")}return r}},{key:"resolveComponentChildren",value:function e(n){return n.hasOwnProperty("children")?this.parseSchema(n.children):[]}},{key:"getComponentMap",value:function e(){return _componentMap.get(this)}},{key:"setComponentMap",value:function e(n){_componentMap.set(this,n)}}]);return e}();exports.default=ReactJsonSchema;